{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import*as firebase from'firebase';import React from'react';var firebaseConfig={apiKey:\"AIzaSyB6rhiakZ8JzVhAm9EXbG42hcpDEtuEg5E\",authDomain:\"allpremium-8a053.firebaseapp.com\",databaseURL:\"https://allpremium-8a053.firebaseio.com\",projectId:\"allpremium-8a053\",storageBucket:\"allpremium-8a053.appspot.com\",messagingSenderId:\"738447525141\",appId:\"1:738447525141:web:c91ec5e2459226255d951c\",measurementId:\"G-QGJN8CM0NC\"};firebase.initializeApp(firebaseConfig);var FirebaseHelper=function(_React$Component){_inherits(FirebaseHelper,_React$Component);function FirebaseHelper(props){var _this;_classCallCheck(this,FirebaseHelper);_this=_possibleConstructorReturn(this,_getPrototypeOf(FirebaseHelper).call(this,props));_this.queryData=function _callee(path){var result,baseRef;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:result=[];baseRef=_this.fireBase.ref(path);return _context.abrupt(\"return\",baseRef.once('value').then(function(snapshot){var object=Object.values(snapshot.val());object.map(function(item,index){result.push(item);});}).then(function(){return result;}));case 3:case\"end\":return _context.stop();}}});};_this.queryDataObj=function _callee2(path){var result,baseRef;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:result='';baseRef=_this.fireBase.ref(path);_context2.next=4;return _regeneratorRuntime.awrap(baseRef.once('value').then(function(snapshot){result=snapshot.val();}));case 4:return _context2.abrupt(\"return\",result);case 5:case\"end\":return _context2.stop();}}});};_this.queryDataObjII=function(path){return _this.fireBase.ref(path).once('value');};_this.queryFileStorage=function _callee3(path){var result,ref;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:result=\"\";ref=_this.fireStorage.ref(path);return _context3.abrupt(\"return\",ref.getDownloadURL().then(function(data){result=data;}).then(function(){return result;}).catch(function(error){console.log(\"Exception : \"+error.message_);}));case 3:case\"end\":return _context3.stop();}}});};_this.queryRealTime=function _callee5(path,orderByPath){var result,baseRef;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:result=[];baseRef=_this.fireBase.ref(path);if(orderByPath==undefined||orderByPath==''){baseRef.orderByKey();}else{baseRef.orderByChild(orderByPath);}baseRef.on('value',function _callee4(snapshot){var object;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:object=Object.values(snapshot.val());object.map(function(item,index){result.push(item);});case 2:case\"end\":return _context4.stop();}}});});case 4:case\"end\":return _context5.stop();}}});};_this.state={index:null,data:Object};console.disableYellowBox=true;_this.fireBase=firebase.database();_this.fireStorage=firebase.storage();return _this;}_createClass(FirebaseHelper,[{key:\"writeUserData\",value:function writeUserData(node,key,obj){return firebase.database().ref(node).child(key).update(obj);}},{key:\"updateData\",value:function updateData(node,key,data){console.log(node);console.log(key);console.log(data);return new Promise(function(resolve){resolve(firebase.database().ref(node).child(key).update(data));});}},{key:\"listenerData\",value:function listenerData(node,callback){return firebase.database().ref(node).on('value',function(snap){return callback(snap);});}},{key:\"uploadImageAllmem\",value:function uploadImageAllmem(key,uri){var response,blob,ref;return _regeneratorRuntime.async(function uploadImageAllmem$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(fetch(uri));case 2:response=_context6.sent;_context6.next=5;return _regeneratorRuntime.awrap(response.blob());case 5:blob=_context6.sent;ref=firebase.storage().ref().child(\"allmembarcode/\"+key);return _context6.abrupt(\"return\",Promise.resolve(ref.put(blob)));case 8:case\"end\":return _context6.stop();}}});}},{key:\"update\",value:function update(path,object){firebase.database().ref(path).set(object).catch(function(error){console.log(\"Erro message : \"+error);});}}]);return FirebaseHelper;}(React.Component);var helper=new FirebaseHelper();export default helper;","map":{"version":3,"sources":["D:/GitProject/PremiumReserve/helper/FireBaseHelper.js"],"names":["firebase","React","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","FirebaseHelper","props","queryData","path","result","baseRef","fireBase","ref","once","then","snapshot","object","Object","values","val","map","item","index","push","queryDataObj","queryDataObjII","queryFileStorage","fireStorage","getDownloadURL","data","catch","error","console","log","message_","queryRealTime","orderByPath","undefined","orderByKey","orderByChild","on","state","disableYellowBox","database","storage","node","key","obj","child","update","Promise","resolve","callback","snap","uri","fetch","response","blob","put","set","Component","helper"],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\r\nimport React from 'react';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyB6rhiakZ8JzVhAm9EXbG42hcpDEtuEg5E\",\r\n    authDomain: \"allpremium-8a053.firebaseapp.com\",\r\n    databaseURL: \"https://allpremium-8a053.firebaseio.com\",\r\n    projectId: \"allpremium-8a053\",\r\n    storageBucket: \"allpremium-8a053.appspot.com\",\r\n    messagingSenderId: \"738447525141\",\r\n    appId: \"1:738447525141:web:c91ec5e2459226255d951c\",\r\n    measurementId: \"G-QGJN8CM0NC\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nclass FirebaseHelper extends React.Component {\r\n\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            index: null,\r\n            data: Object\r\n        };\r\n        \r\n        console.disableYellowBox = true;\r\n        // console.ignoredYellowBox = ['Setting a timer'];\r\n\r\n        this.fireBase = firebase.database();\r\n        this.fireStorage = firebase.storage();\r\n\r\n    }\r\n\r\n    queryData = async(path) => {\r\n\r\n        const result = [];\r\n\r\n        const baseRef = this.fireBase.ref(path);\r\n\r\n        return baseRef.once('value').then(snapshot => {\r\n\r\n            let object = Object.values(snapshot.val());\r\n\r\n            object.map((item, index) => {\r\n                result.push(item);\r\n            });\r\n            \r\n        }).then(() => {\r\n            return result;\r\n        })\r\n\r\n    }\r\n // tb_\r\n //key  \r\n writeUserData(node,key,obj){\r\n    return (firebase.database().ref(node).child(key).update(obj));\r\n}\r\n\r\n  updateData(node, key, data) {\r\n        console.log(node);\r\n        console.log(key);\r\n        console.log(data);\r\n        //firebase.database().ref(node).child(key).update(data)\r\n       return new Promise(resolve => {\r\n           resolve(firebase.database().ref(node).child(key).update(data))\r\n         })\r\n        }\r\n    \r\n  listenerData(node, callback) {\r\n        return firebase.database().ref(node).on('value', snap => callback(snap))\r\n    }\r\n    queryDataObj = async(path) => {\r\n        \r\n        let result='' ;\r\n        const baseRef = this.fireBase.ref(path);\r\n        await baseRef.once('value').then(snapshot => {\r\n           // console.log(\"XXXXXXXXXXXXXXXXXXXXXXXX\"); \r\n          //  console.log(snapshot.val());           \r\n            //Object.assign(result, snapshot.val().product_code) \r\n            result     =  snapshot.val();  \r\n           // console.log(\"1YYYYYYYYYYYYYYYYYYYYYYYYYY\"); \r\n          //   console.log(result);\r\n           //  console.log(\"2YYYYYYYYYYYYYYYYYYYYYYYYYY\");\r\n        });\r\n        //console.log(\"3YYYYYYYYYYYYYYYYYYYYYYYYYY\"); \r\n        //console.log(result);\r\n        //console.log(\"4YYYYYYYYYYYYYYYYYYYYYYYYYY\"); \r\n        return  result;\r\n    \r\n    }\r\n    queryDataObjII = (path) => {\r\n        //alert('xxxxx');\r\n        return  this.fireBase.ref(path).once('value')\r\n    }\r\n\r\n    queryFileStorage = async(path) => {\r\n\r\n        let result = \"\";\r\n\r\n        const ref = this.fireStorage.ref(path);\r\n\r\n        return ref.getDownloadURL().then(data => {\r\n            result = data;\r\n            }).then(() => {\r\n                return result;\r\n            }).catch(error => {\r\n                console.log(\"Exception : \" + error.message_)\r\n            })\r\n\r\n    }\r\n\r\n    queryRealTime = async(path, orderByPath) => {\r\n\r\n        const result = [];\r\n\r\n        const baseRef = this.fireBase.ref(path);\r\n\r\n        if( orderByPath == undefined || orderByPath == '' ){\r\n            baseRef.orderByKey();\r\n        }else{\r\n            baseRef.orderByChild(orderByPath);\r\n        }\r\n\r\n        baseRef.on('value', async function(snapshot) {\r\n\r\n            let object = Object.values(snapshot.val());\r\n\r\n            object.map((item, index) => {\r\n                result.push(item);\r\n            });\r\n\r\n        })\r\n\r\n    }\r\n      async uploadImageAllmem(key, uri) {\r\n        const response = await fetch(uri);\r\n        const blob = await response.blob();\r\n        var ref = firebase.storage().ref().child(\"allmembarcode/\" + key);\r\n        return Promise.resolve(ref.put(blob))\r\n    }\r\n\r\n    update(path, object){\r\n        firebase.database().ref(path).set(object).catch(error=>{\r\n           console.log(\"Erro message : \" + error)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nconst helper = new FirebaseHelper();\r\nexport default helper;"]},"metadata":{},"sourceType":"module"}